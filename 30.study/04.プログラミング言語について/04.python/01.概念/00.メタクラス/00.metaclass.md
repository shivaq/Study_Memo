# メタクラスとは

## Python の class これによって成り立っている

* クラスはOBJ。
* 他のOBJ と同様、何かのインスタンス
* クラスは、メタクラスのインスタンス
* デフォルトのメタクラスは `type`
* インスタンスは クラスのインスタンス。クラスはメタクラスのインスタンス。という関係
* 下記でクラスを作成できる

```py
MyClass = type('MyClass', (), {})
```



## カスタム メタクラスを作って、それで class を作る

```py
class Meta(type):
  pass
```

```py
class Complex(metaclass=Meta):
  pass
```


## struct
* C 言語とその派生における struct(構造体)の特徴
* グループ化した変数のリストを、一つのメモリのブロック上に、一つの名前のもとに配置したもの
* 一つのポインタ、またはそのstructのアドレスを返す宣言名で、異なる変数にアクセスできる









## Magic method lookup
* マジックメソッドのｍルックアップは、クラスで行われる
* Struct の slot に対して直接見に行く

1. その オブジェクト のクラスにはマジックメソッドのスロットがあるか？ (roughly object->ob_type->tp_<magicmethod> in C code)?
 →Yes →使う。
 →Null →その処理はサポート外

# C の内部の用語では
object->ob_type これが、オブジェクトのクラス
ob_type->tp_<magicmethod> これが、タイプスロット
