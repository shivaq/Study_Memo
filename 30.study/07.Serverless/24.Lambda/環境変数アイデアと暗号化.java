■■■■■■■■■■■■■■■■■■■■■■■■■■ 環境別の接続先を指定する
Database:Test_DB, Prod_DB
DB_Connection:TEST, PROD



■■■■■■■■■■■■■■■■■■■■■■■■■■ セキュアな情報を暗号化して環境変数で扱う
・デプロイ時には暗号化がなされないため、センシティブな情報はデプロイ前に Ciphertext を使って暗号化しなければならない

・KMS を使用
・Lambda起動時に復号化される
・Lambdaを新規作成/更新すると、デフォルトで暗号化される
・encryption ヘルパーを使う際は、デフォルトのKMS だとエラーになるため、自前のKMSを使う必要がある。
・自前KMSを使えば、複合化されたかどうか監査等もできる。
・自前KMSを使うには、 kms:Decrypt 権限が必要 ※ Lambda にもユーザーにも。たぶん。
・該当Lambdaの更新にもKMS権限が必要

■■■■■■■■■■■■■■■■■■■■■■■■■■ encryption ヘルパー
Ciphertext を
