set_aws_mfa.AWS_ACCOUNT_FOR_SET_AWS_MFA = "~/.fake/fake"


set_aws_mfa.AWS_ACCOUNT_FOR_SET_AWS_MFA = "~/.aws_accounts_for_set_aws_mfa"


# # 1. ~/.aws_accounts_for_set_aws_mfa がないときに、該当ファンクションが呼ばれること
# def test_create_aws_accounts_for_set_aws_mfa_is_called_when_no_aws_accounts_for_set_aws_mfa_exists(monkeypatch, set_fake_files):
#
#     # GIVEN: the path of target file that is a non existence fake path
#     config_file = set_aws_mfa.AWS_ACCOUNT_FOR_SET_AWS_MFA
#
#     def mock_check
#     # TODO: mock the called function
#     monkeypatch.setattr(set_aws_mfa, 'check_aws_accounts_file_existence', set_aws_mfa.create_a_aws_accounts_for_set_aws_mfa_file)
#
#     # WHEN: the function is called
#     set_aws_mfa.check_aws_accounts_file_existence()
#     # THEN:


-------------------------------------------------
AWS_ACCOUNT_FOR_SET_AWS_MFA = "~/.aws_accounts_for_set_aws_mfa"


def check_aws_accounts_file_existence():
    """
    Check if ~/.aws_accounts_for_set_aws_mfa exists
    """
    config_file = AWS_ACCOUNT_FOR_SET_AWS_MFA
    filename = os.path.expanduser(config_file)
    if not os.path.exists(filename):
        create_a_aws_accounts_for_set_aws_mfa_file()


def create_a_aws_accounts_for_set_aws_mfa_file():
    """~/.aws_accounts_for_set_aws_mfa を作る"""
    # TODO: write a test


def prepare_aws_accounts():
    """~/.aws_accounts_for_set_aws_mfa を読み込む"""
    # TODO: write a test
    config_file = AWS_ACCOUNT_FOR_SET_AWS_MFA
    filename = os.path.expanduser(config_file)

    with open(filename) as cfg:
        Config.clear()
        # 該当 ini ファイルを Config に読み込む
        Config.read_file(cfg)


def get_aws_accounts_section_dict() -> collections.OrderedDict:
    """~/.aws_accounts_for_set_aws_mfa から Section 情報を取得する"""
    # TODO: write a test
    prepare_aws_accounts()
    # 該当 ini ファイルのセクション dictionary を取得
    return Config._sections


def get_aws_account_id(perfect_profile: ProfileTuple):
    """~/.aws_accounts_for_set_aws_mfa を読み込む"""
    config_file = AWS_ACCOUNT_FOR_SET_AWS_MFA
    # TODO:
    return 33333333
